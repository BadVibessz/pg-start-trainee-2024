# PGStart trainee 2024
#### Danila Tsymbal

## Запуск

Для запуска необходимо выполнить команду

```shell
make run
```

после чего создадутся и запустятся два Docker контейнера, 
один с базой данных Postgres, другой с самим приложением.


Для запуска интеграционных тестов необходимо выполнить команду

```shell
make test.integration
```

## Ход решения

В задании сказано, что по API должно предоставлять возможность создавать 
и запускать bash скрипт, при этом ничего не сказано про обработку ошибок при выполнении скрипта, 
поэтому действовал по своему усмотрению.  
**Логика следующая**:  
- Пользователь запрашивает API метод на создание скрипта, передавая саму команду
- После чего скрипт запускается и сохраняется в базе данных,
  пользователю возвращается http 200 и Json созданного скрипта
- Если команда имеет невалидный синтаксис или такой команды не существует, то
по данному методу пользователь никак об этом не узнает, ему необходимо будет 
вызывать отдельный API метод на получение скрипта из БД, где будет представлен output команды (stdout + stderr)

### Как запускаются скрипты
Для запуска произвольной команды придумал следующее решение: 
пользователь строкой передает команду, дальше создается временный файл с xxx_temp_scipt.sh с переданной командой, 
где вместо xxx указывается time.now() в Unix формате.  
После этого запускается скрипт.

Обновление состояния скрипта в БД происходит в асинхронном режиме.

## Документация
Все API методы задокументированы с помощью Swagger, документацию можно найти 
по пути: **_./docs_**